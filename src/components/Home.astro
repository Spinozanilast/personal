---
import LetterHoverAnimation from "./LetterHoverAnimation.astro";
import type { AnimationInfo } from "./LetterHoverAnimation.astro";
import Reference from "./Reference.astro";

import GithubIcon from "../assets/brands/github.svg";
import TelegramIcon from "../assets/brands/telegram.svg";
import BookIcon from "../assets/book.svg";
import DiaryIcon from "../assets/diary.svg";

const ANIMATION_BEFORE_LOOP_DURATION = 2700;

const blueAnimationInfo: AnimationInfo = {
    staticPath: "/animations/snakish/blue-static.webp",
    animationPath: "/animations/snakish/blue.webp",
    loopedAnimationPath: "/animations/snakish/blue-looping.webp",
    beforeLoopedDuration: ANIMATION_BEFORE_LOOP_DURATION,
};

const redAnimationInfo: AnimationInfo = {
    staticPath: "/animations/snakish/red-static.webp",
    animationPath: "/animations/snakish/red.webp",
    loopedAnimationPath: "/animations/snakish/red-looping.webp",
    beforeLoopedDuration: ANIMATION_BEFORE_LOOP_DURATION,
};
---

<main>
    <section id="nickname">
        <h1 id="nickname-self">
            <LetterHoverAnimation
                animationInfo={blueAnimationInfo}
                letter="s"
                iconPosition="left"
                zIndex={0}
                letterClass="blue"
            />
            <span class="red relative z-1">p</span><span
                class="blue relative z-2">i</span
            ><span class="red relative z-3">n</span><span
                class="blue relative z-4">o</span
            ><span class="red relative z-5">z</span><span
                class="blue relative z-6">a</span
            ><span class="red relative z-7">n</span><span
                class="blue relative z-8">i</span
            ><span class="red relative z-9">l</span><span
                class="blue relative z-10">a</span
            ><LetterHoverAnimation
                animationInfo={redAnimationInfo}
                zIndex={11}
                iconClassName="left-[1em]"
                iconPosition="right"
                letterClass="red"
                letter="s"
            /><span class="blue relative z-12">t</span>
        </h1>
        <div class="horizontal-line"></div>
    </section>
    <section id="links">
        <a href="https://github.com/spinozanilast" class="link" target="_blank">
            <GithubIcon />
            <span>Github</span>
        </a>
        <a href="https://t.me/spinozanilast" class="link" target="_blank">
            <TelegramIcon />
            <span>Telegram</span>
        </a>
    </section>
    <section id="references" class="container">
        <Reference
            title="Resume"
            link="https://github.com/spinozanilast/spinozanilast.github.io"
            ><BookIcon /></Reference
        >
        <Reference
            title="Diary"
            link="https://github.com/spinozanilast/spinozanilast.github.io"
            separateTab={false}><DiaryIcon /></Reference
        >
    </section>
</main>

<style>
    @reference "../styles/global.css";

    main {
        font-family: "Pixelify Sans", sans-serif;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .fill {
        fill: brown;
    }

    #background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        filter: blur(100px);
    }

    section#nickname {
        display: flex;
        flex-direction: column;
        align-items: end;
        flex-direction: column;
        justify-content: center;
        padding: 16px;
        width: fit-content;
    }

    #nickname-self {
        width: 100%;
        font-family: "NTBrickSans", sans-serif;
        font-size: 12.5vw;
        text-align: center;
        letter-spacing: -0.3em;
        min-width: max-content;
        transition: letter-spacing 1s ease-in-out;
        text-transform: uppercase;
        text-wrap: nowrap;

        > span {
            @apply transition-all duration-[var(--standard-animation-duration)];
        }
    }

    section {
        background-color: var(--section-semi-transparent-color);
    }

    section#links {
        position: relative;
        display: flex;
        width: 67.5vw;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        gap: 1em;
        margin-top: 1em;
        margin-bottom: 1em;

        &::before {
            position: relative;
            z-index: -1000;
            content: "LINKS";
            position: absolute;
            opacity: 5%;
            font-size: 16px;
            font-size: calc(max(1vw, 1vh) * 15);
        }
    }

    section#references {
        width: 90%;
        margin-top: 3em;

        &::before {
            position: relative;
            z-index: -1000;
            content: "REFERENCES";
            position: absolute;
            opacity: 5%;
            font-size: 16px;
            font-size: calc(max(1vw, 1vh) * 15);
        }
    }

    section#references.container {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;

        @media (max-width: 768px) {
            flex-direction: column;
        }
    }

    .link {
        font-weight: 500;
        font-size: 1.5em;
        @apply h-30 w-30;
        fill: var(--red-accent-color);
        text-align: center;

        &:hover svg {
            scale: 1.1;
        }
    }

    svg {
        width: 100%;
        height: 100%;
    }

    .horizontal-line {
        position: relative;
        @apply rounded-md;
        width: 100%;
        height: calc(min(1vw, 2vh) / 1);
        background-color: var(--red-accent-color);
        margin-top: 0.5em;
        bottom: 25px;

        @media (max-width: 768px) {
            bottom: 10px;
        }
    }

    @media screen and (max-width: 768px) {
        section#links {
            > a {
                @apply h-16 w-16;
            }
        }
    }
</style>
